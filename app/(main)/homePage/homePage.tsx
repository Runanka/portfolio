"use client";

import { useRef } from "react";

import { motion, useScroll, useSpring, useTransform } from "framer-motion";
import MainCard from "./maincard/mainCard";
import IntroPage from "./intropage/introPage";

export default function HomePage() {
  const ref = useRef(null);
  const { scrollYProgress } = useScroll({
    target: ref,
    offset: ["start start", "end end"],
  });
  const springY = useSpring(scrollYProgress, { stiffness: 400, damping: 90 });

  const y = useTransform(springY, [0, 1], ["0%", "90%"]);

  return (
    <div className="z-0">
      <div className="fixed top-0 left-0 z-10 bg-[#F5F5DC]">
        <motion.svg
          style={{ y }}
          width="100vw"
          height="100vh"
          initial={{ scale: 1.5 }}
          whileInView={{ scale: 1 }}
          transition={{ duration: 1, ease: "easeOut", delay: 0.5 }}
        >
          <defs>
            <symbol
              id="wave"
              viewBox="0 65 1440 400"
              preserveAspectRatio="xMinYMin meet"
            >
              <style>
                {
                  '.path-3{\n            animation:pathAnim-3 4s;\n            animation-timing-function: linear;\n            animation-iteration-count: infinite;\n          }\n          @keyframes pathAnim-3{\n            0%{\n              d: path("M 0,400 L 0,150 C 75.19753313696611,181.36708394698087 150.39506627393223,212.7341678939617 207,188 C 263.60493372606777,163.2658321060383 301.61726804123714,82.43041237113401 357,76 C 412.38273195876286,69.56958762886599 485.1358615611193,137.54418262150222 551,144 C 616.8641384388807,150.45581737849778 675.8392857142857,95.39285714285715 728,89 C 780.1607142857143,82.60714285714285 825.506995581738,124.8843888070692 884,135 C 942.493004418262,145.1156111929308 1014.1327319587629,123.06958762886597 1086,128 C 1157.8672680412371,132.93041237113403 1229.9620765832105,164.83726067746687 1289,173 C 1348.0379234167895,181.16273932253313 1394.0189617083947,165.58136966126656 1440,150 L 1440,400 L 0,400 Z");\n            }\n            25%{\n              d: path("M 0,400 L 0,150 C 48.858983799705456,149.1620029455081 97.71796759941091,148.32400589101618 158,144 C 218.2820324005891,139.67599410898382 289.9871134020619,131.8659793814433 358,149 C 426.0128865979381,166.1340206185567 490.33357879234165,208.2120765832106 543,199 C 595.6664212076583,189.7879234167894 636.6785714285714,129.28571428571428 696,124 C 755.3214285714286,118.71428571428571 832.9521354933728,168.64506627393223 907,184 C 981.0478645066272,199.35493372606777 1051.512886597938,180.1340206185567 1102,178 C 1152.487113402062,175.8659793814433 1182.9963181148748,190.81885125184095 1236,189 C 1289.0036818851252,187.18114874815905 1364.5018409425625,168.59057437407952 1440,150 L 1440,400 L 0,400 Z");\n            }\n            50%{\n              d: path("M 0,400 L 0,150 C 55.58192194403533,153.37960235640648 111.16384388807066,156.75920471281296 172,143 C 232.83615611192934,129.24079528718704 298.92654639175265,98.34278350515463 357,104 C 415.07345360824735,109.65721649484537 465.12997054491893,151.8696612665685 524,151 C 582.8700294550811,150.1303387334315 650.5535714285714,106.17857142857142 724,108 C 797.4464285714286,109.82142857142858 876.6557437407952,157.4160530191458 931,183 C 985.3442562592048,208.5839469808542 1014.8234536082473,212.15721649484536 1066,196 C 1117.1765463917527,179.84278350515464 1190.050441826215,143.95508100147276 1256,133 C 1321.949558173785,122.04491899852725 1380.9747790868923,136.02245949926362 1440,150 L 1440,400 L 0,400 Z");\n            }\n            75%{\n              d: path("M 0,400 L 0,150 C 58.21907216494846,113.77908689248895 116.43814432989691,77.55817378497791 175,83 C 233.56185567010309,88.44182621502209 292.46649484536084,135.54639175257734 344,135 C 395.53350515463916,134.45360824742266 439.69587628865986,86.25625920471282 510,87 C 580.3041237113401,87.74374079528718 676.7499999999999,137.42857142857142 738,151 C 799.2500000000001,164.57142857142858 825.3041237113403,142.0294550810015 874,146 C 922.6958762886597,149.9705449189985 994.0335051546392,180.45360824742266 1064,170 C 1133.9664948453608,159.54639175257734 1202.5618556701031,108.1561119293078 1265,98 C 1327.4381443298969,87.8438880706922 1383.7190721649486,118.9219440353461 1440,150 L 1440,400 L 0,400 Z");\n            }\n            100%{\n              d: path("M 0,400 L 0,150 C 75.19753313696611,181.36708394698087 150.39506627393223,212.7341678939617 207,188 C 263.60493372606777,163.2658321060383 301.61726804123714,82.43041237113401 357,76 C 412.38273195876286,69.56958762886599 485.1358615611193,137.54418262150222 551,144 C 616.8641384388807,150.45581737849778 675.8392857142857,95.39285714285715 728,89 C 780.1607142857143,82.60714285714285 825.506995581738,124.8843888070692 884,135 C 942.493004418262,145.1156111929308 1014.1327319587629,123.06958762886597 1086,128 C 1157.8672680412371,132.93041237113403 1229.9620765832105,164.83726067746687 1289,173 C 1348.0379234167895,181.16273932253313 1394.0189617083947,165.58136966126656 1440,150 L 1440,400 L 0,400 Z");\n            }\n          }'
                }
              </style>
              <path
                width="100%"
                d="M 0,400 L 0,150 C 75.19753313696611,181.36708394698087 150.39506627393223,212.7341678939617 207,188 C 263.60493372606777,163.2658321060383 301.61726804123714,82.43041237113401 357,76 C 412.38273195876286,69.56958762886599 485.1358615611193,137.54418262150222 551,144 C 616.8641384388807,150.45581737849778 675.8392857142857,95.39285714285715 728,89 C 780.1607142857143,82.60714285714285 825.506995581738,124.8843888070692 884,135 C 942.493004418262,145.1156111929308 1014.1327319587629,123.06958762886597 1086,128 C 1157.8672680412371,132.93041237113403 1229.9620765832105,164.83726067746687 1289,173 C 1348.0379234167895,181.16273932253313 1394.0189617083947,165.58136966126656 1440,150 L 1440,390 L 0,400 Z"
                fill="#3E2723"
                className="transition-all duration-300 ease-in-out delay-150 path-3"
              />
              <rect y="390" width="100%" height="1000%" fill="#3E2723" />
            </symbol>
          </defs>
          <use href="#wave" width="100%" />
        </motion.svg>
      </div>
      <div
        ref={ref}
        className="absolute top-0 left-0 w-svw h-max z-20 flex flex-col items-center"
      >
        <IntroPage />
        <MainCard />
      </div>
    </div>
  );
}
